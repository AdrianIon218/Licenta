import{r as u,j as l,F as S,a as e,R as w}from"./index-d0f1066a.js";import{a as C}from"./axios-707ed124.js";import{N,a as k}from"./Notfication-399fba77.js";import{I as x}from"./commonInterfaces-83a6a30d.js";function v(t){const[s,o]=u.useState(!1),[c,m]=u.useState(!1),d=a=>{a.currentTarget.value==="true"===t.structure.state?t.correctAnswear():(o(!0),m(!0))},f=()=>{setTimeout(()=>t.wrongAnswear(),200)};return l(S,{children:[s&&e(N,{message:`Propoziția este ${t.structure.state?"correctă ":"incorectă "}!`,type:k.ERROR,deleteNotification:()=>o(!1)}),l("div",{className:"flex-column--centered exercise",children:[e("h3",{children:"Este corectă propoziția din punct de vedere gramatical ?"}),e("h4",{children:t.structure.sentence}),l("div",{children:[e("button",{value:"flase",disabled:c,onClick:d,className:"false-btn",children:"Falsch"}),e("button",{value:"true",disabled:c,onClick:d,className:"true-btn",children:"Richtig"})]}),c&&e("div",{className:"flex-column--centered",children:t.structure.correct_sentence&&e("h4",{className:"correct_sentence",children:`Varianta corectă : ${t.structure.correct_sentence}`})}),c&&e("button",{className:"submitBtn u-center-text",onClick:f,children:"Continuă"})]})]})}function E(t){const s=u.useRef(null),[o,c]=u.useState({isShown:!1,isCorrect:!1}),m=a=>{s.current.innerText=a.currentTarget.value},d=()=>{if(o.isShown){o.isCorrect?t.correctAnswear():t.wrongAnswear();return}const a=s.current.innerText;a!=""&&(a===t.structure.correctAnswear?c({isShown:!0,isCorrect:!0}):c({isShown:!0,isCorrect:!1}))},f=t.structure.choices.map((a,i)=>e("button",{onClick:m,className:o.isShown?a===t.structure.correctAnswear?"backgd-green":"backgd-red":"",value:a,disabled:o.isShown,children:a},i));return l("div",{className:"flex-column--centered exercise",children:[e("h3",{children:"Completează propoziția"}),l("h4",{children:[t.structure.sentence_part_1," ",e("span",{className:`block-transparent ${o.isShown?o.isCorrect?"backgd-green":"backgd-red":""}`,ref:s})," ",t.structure.sentence_part_2]}),e("div",{className:"box-btns",children:f}),l("button",{className:"submitBtn u-center-text",onClick:d,children:[o.isShown?"Continuă":"Verifică"," ",e("i",{className:"fas fa-angle-double-right"})]})]})}function A(t){const[s,o]=u.useState([]),[c,m]=u.useState({isShown:!1,isCorrect:!1}),d=t.structure.choices.map(r=>r[0]).map((r,n)=>l("li",{children:[e("div",{className:"u-center-text",children:r}),e("div",{className:`u-center-text ${c.isShown?s[n]===t.structure.choices[n][1]?"backgd-green":"backgd-red":""}`,children:s[n]??""})]},n)),f=r=>{const{value:n}=r.currentTarget;o(b=>b.concat([n]))},i=u.useMemo(()=>t.structure.choices.map(r=>r[1]).sort((r,n)=>.5-Math.random()),[]).map((r,n)=>e("button",{onClick:f,value:r,disabled:s.length===d.length||s.includes(r),children:r},n)),h=()=>{if(s.length===t.structure.choices.length){const r=t.structure.choices.every((n,b)=>n[1]===s[b]);m({isShown:!0,isCorrect:r})}},g=r=>{if(r.currentTarget.disabled=!0,c.isCorrect){t.correctAnswear();return}t.wrongAnswear()};return l("div",{className:"flex-column--centered exercise",children:[e("h3",{children:"Completează perechiile"}),e("ul",{className:"choices-match-box",children:d}),e("div",{className:"box-btns choices-box",children:i}),l("button",{className:"submitBtn u-center-text",onClick:()=>{o([])},hidden:c.isShown,children:[e("i",{className:"fa fa-refresh"})," Reset"]}),l("button",{className:"submitBtn u-center-text",onClick:h,hidden:c.isShown,children:["Verifică ",e("i",{className:"fas fa-angle-double-right"})]}),c.isShown&&!c.isCorrect&&e("ul",{className:"choices-box correct-choices",children:t.structure.choices.map((r,n)=>e("li",{children:r.join(" ")},n))}),c.isShown&&l("button",{className:"submitBtn u-center-text",onClick:g,children:["Continuă ",e("i",{className:"fas fa-angle-double-right"})]})]})}function B(t){const[s,o]=u.useState([]),[c,m]=u.useState({isShown:!1,isCorrect:!1}),d=r=>{const{value:n}=r.currentTarget;o(b=>[...b,n])},f=t.structure.words.map((r,n)=>e("span",{className:`block-transparent ${c.isShown?r===s[n]?"backgd-green":"backgd-red":""}`,children:s[n]},n)),i=u.useMemo(()=>[...t.structure.words].sort((r,n)=>.5-Math.random()),[]).map((r,n)=>e("button",{onClick:d,value:r,disabled:s.includes(r),children:r},n)),h=()=>{if(i.length===t.structure.words.length){const r=t.structure.words.every((n,b)=>n===s[b]);m({isShown:!0,isCorrect:r})}},g=r=>{if(r.currentTarget.disabled=!0,c.isCorrect){t.correctAnswear();return}t.wrongAnswear()};return l("div",{className:"flex-column--centered exercise",children:[e("h3",{className:"u-center-text",children:"Ordonează cuvintele astfel încât propoziția să fie corectă !"}),e("p",{className:"flex-row--centered sentence-builder",children:f}),e("div",{className:"box-btns choices-box",children:i}),l("button",{className:"submitBtn u-center-text",onClick:()=>{o([])},hidden:c.isShown,children:[e("i",{className:"fa fa-refresh"})," Reset"]}),l("button",{className:"submitBtn u-center-text",onClick:h,hidden:c.isShown,children:["Verifică ",e("i",{className:"fas fa-angle-double-right"})]}),c.isShown&&!c.isCorrect&&e("div",{className:"choices-box correct-choices flex-column--centered",children:t.structure.words.join(" ")}),c.isShown&&l("button",{className:"submitBtn u-center-text",onClick:g,children:["Continuă ",e("i",{className:"fas fa-angle-double-right"})]})]})}function y(t){const[s,o]=u.useState({score:0,currentExIndex:0,progressBar:50}),[c,m]=u.useState([]);u.useEffect(()=>{t.addProgress(s.progressBar)},[s.progressBar]);const d=a=>{o(i=>({score:i.score+1,currentExIndex:i.currentExIndex+1,progressBar:i.progressBar+a}))},f=a=>{o(i=>({score:i.score-1,currentExIndex:i.currentExIndex+1,progressBar:i.progressBar+a}))};return u.useEffect(()=>{C.post("http://localhost:5000/lessons/grammer/getExercises",{lessonId:t.lessonId}).then(a=>{const i=a.data;i.sort((h,g)=>.5-Math.random()),m(i.map((h,g)=>{const r={structure:h.structure,correctAnswear:()=>d(50/i.length),wrongAnswear:()=>f(50/i.length)};return l(w.Fragment,{children:[h.type==="true_false"&&e(v,{...r}),h.type==="complete_sentence"&&e(E,{...r}),h.type==="match_choices"&&e(A,{...r}),h.type==="order_words"&&e(B,{...r})]},g)}))})},[t.lessonId]),u.useEffect(()=>{const a=c.length;if(s.currentExIndex>0&&s.currentExIndex===a){const i=s.score>a/2?x.STAR_3:s.score/3>a?x.STAR_2:x.STAR_1;t.toFinish(i)}},[s]),e(w.Fragment,{children:c[s.currentExIndex]})}export{y as default};
