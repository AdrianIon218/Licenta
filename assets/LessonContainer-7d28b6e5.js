import{j as l,a as e,r as s,V as h,_ as b,F as f,u as _}from"./index-bdb5fe2f.js";import{a as I}from"./axios-707ed124.js";function v({progressStatus:n}){return l("div",{className:"progress-bar__box",children:[e("div",{className:"progress-bar__loading",style:{width:`${n}%`}}),e("div",{className:"progress-bar__grid-half"})]})}function x(n){const t=s.useContext(h);return e("div",{children:e("button",{onClick:()=>{t.startRecord(5).then(a=>{console.log(a)})},children:"Start recording"})})}const S=s.lazy(()=>b(()=>import("./StartView-322da827.js"),["assets/StartView-322da827.js","assets/index-bdb5fe2f.js","assets/index-ffaf9618.css"]));function p(n){const[t,o]=s.useState(0),a=d=>{n.triggerTransition(),setTimeout(()=>o(d),450)},[c,r]=s.useState();return s.useEffect(()=>{const d=sessionStorage.getItem("moduleId");sessionStorage.getItem("lessonId"),sessionStorage.getItem("lessonType"),I.post("http://localhost:5000/course_modules/getWords",{moduleId:d}).then(g=>{console.log(g.data),g.data.forEach(i=>{const u=new Uint8Array(i.image.data);r(URL.createObjectURL(new Blob([u],{type:"application/octet-stream"})))})})},[]),l(f,{children:[e("img",{src:c,alt:"nu merge"}),t===0&&e(S,{title:n.lessonTitle,startClickHandler:()=>a(1)}),t===1&&e(x,{toExecises:()=>a(2)})]})}function N(n){const[t,o]=s.useState(!1),a=_(),c=s.useCallback(()=>{sessionStorage.setItem("lessonId",""),sessionStorage.setItem("moduleId",""),sessionStorage.setItem("lessonTitle",""),o(!0),setTimeout(()=>a(-1),410)},[]),r=s.useCallback(()=>{o(!0),setTimeout(()=>n.closeBk(),350)},[]);return e("div",{className:`exit_message__blackdrop ${t&&"exit_message__blackdrop--close"}`,children:l("div",{className:"exit_message__box flex-column--centered",children:[e("div",{className:"btn_exit_ctn",children:e("div",{className:"btn_exit",onClick:r,children:" × "})}),e("h3",{children:" Sigur dorești să închizi lecția ? "}),l("div",{className:"flex-row--centered",children:[e("div",{className:"btn btn--white lesson-btn",onClick:c,children:" Da "}),e("div",{className:"btn btn--blue lesson-btn",onClick:r,children:" Nu "})]})]})})}function C(){const[n,t]=s.useState(!1);return l(f,{children:[n&&e(N,{closeBk:()=>t(!1)}),e("div",{className:"lesson__exit",children:e("button",{className:"lesson__exit__btn",onClick:()=>{t(!0)},children:"×"})})]})}function k(n,t){const o=s.useRef(null);return s.useImperativeHandle(t,()=>({trigger:()=>{o.current.classList.add("lesson-transition--animated")}}),[]),e("div",{className:"lesson-transition",onAnimationEnd:()=>{o.current.classList.remove("lesson-transition--animated")},ref:o})}const L=s.forwardRef(k);function R(){const[n,t]=s.useState({lessonId:-1,moduleId:-1,lessonTitle:""}),[o,a]=s.useState(0),c=_(),r=s.useRef({trigger:()=>{}});s.useEffect(()=>{const i=sessionStorage.getItem("lessonId"),u=sessionStorage.getItem("moduleId"),m=sessionStorage.getItem("lessonTitle");i&&u&&m?t({lessonId:+i,moduleId:+u,lessonTitle:m}):c("/Licenta/PageNotFound")},[]);const d=s.useCallback(i=>{i>=0&&i<=100&&a(i)},[]),g=s.useCallback(()=>{r.current.trigger()},[]);return l("section",{className:"lesson-section",children:[l("div",{className:"lesson-ctn",children:[e(p,{...n,setProgressBar:d,triggerTransition:g}),e(L,{ref:r})]}),e("div",{className:"lesson__progress-bar",children:e(v,{progressStatus:o})}),e(C,{})]})}export{R as default};
