import{j as a,a as e,r as s,V as b,_ as h,F as g,u as m}from"./index-3151d6d7.js";function v({progressStatus:t}){return a("div",{className:"progress-bar__box",children:[e("div",{className:"progress-bar__loading",style:{width:`${t}%`}}),e("div",{className:"progress-bar__grid-half"})]})}function I(){const t=s.useContext(b);return s.useEffect(()=>{t==null||t.readTextWithVoiceSlowly("Ich war aber krank gestern")},[]),e("div",{children:"LessonView"})}const x=s.lazy(()=>h(()=>import("./StartView-d72547ab.js"),["assets/StartView-d72547ab.js","assets/index-3151d6d7.js","assets/index-ffaf9618.css"]));function N(t){const[n,o]=s.useState(0),i=()=>{t.triggerTransition(),setTimeout(()=>o(1),450)};return a(g,{children:[n===0&&e(x,{title:t.lessonTitle,startClickHandler:i}),n===1&&e(I,{})]})}function k(t){const[n,o]=s.useState(!1),i=m(),c=s.useCallback(()=>{sessionStorage.setItem("lessonId",""),sessionStorage.setItem("moduleId",""),sessionStorage.setItem("lessonTitle",""),o(!0),setTimeout(()=>i(-1),410)},[]),l=s.useCallback(()=>{o(!0),setTimeout(()=>t.closeBk(),350)},[]);return e("div",{className:`exit_message__blackdrop ${n&&"exit_message__blackdrop--close"}`,children:a("div",{className:"exit_message__box flex-column--centered",children:[e("div",{className:"btn_exit_ctn",children:e("div",{className:"btn_exit",onClick:l,children:" × "})}),e("h3",{children:" Sigur dorești să închizi lecția ? "}),a("div",{className:"flex-row--centered",children:[e("div",{className:"btn btn--white lesson-btn",onClick:c,children:" Da "}),e("div",{className:"btn btn--blue lesson-btn",onClick:l,children:" Nu "})]})]})})}function S(){const[t,n]=s.useState(!1);return a(g,{children:[t&&e(k,{closeBk:()=>n(!1)}),e("div",{className:"lesson__exit",children:e("button",{className:"lesson__exit__btn",onClick:()=>{n(!0)},children:"×"})})]})}function C(t,n){const o=s.useRef(null);return s.useImperativeHandle(n,()=>({trigger:()=>{o.current.classList.add("lesson-transition--animated")}}),[]),e("div",{className:"lesson-transition",onAnimationEnd:()=>{o.current.classList.remove("lesson-transition--animated")},ref:o})}const T=s.forwardRef(C);function p(){const[t,n]=s.useState({lessonId:-1,moduleId:-1,lessonTitle:""}),[o,i]=s.useState(0),c=m(),l=s.useRef({trigger:()=>{}});s.useEffect(()=>{const r=sessionStorage.getItem("lessonId"),d=sessionStorage.getItem("moduleId"),u=sessionStorage.getItem("lessonTitle");r&&d&&u?n({lessonId:+r,moduleId:+d,lessonTitle:u}):c("/Licenta/PageNotFound")},[]);const _=s.useCallback(r=>{r>=0&&r<=100&&i(r)},[]),f=s.useCallback(()=>{l.current.trigger()},[]);return a("section",{className:"lesson-section",children:[a("div",{className:"lesson-ctn",children:[e(N,{...t,setProgressBar:_,triggerTransition:f}),e(T,{ref:l})]}),e("div",{className:"lesson__progress-bar",children:e(v,{progressStatus:o})}),e(S,{})]})}export{p as default};
