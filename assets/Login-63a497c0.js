import{r as o,j as i,a,F as d}from"./index-7c380a4d.js";import{L as f}from"./LinkTransition-9b444635.js";import{a as _}from"./axios-707ed124.js";var t=(e=>(e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.NO_TYPE=3]="NO_TYPE",e))(t||{});function h({message:e,type:s,deleteNotification:n}){const r=o.useRef(null),c=()=>{console.log(s),r.current.classList.add("notification--fade-out"),setTimeout(()=>n(),605)};return o.useEffect(()=>{setTimeout(()=>{r.current!==null&&c()},5e3)},[]),i("div",{className:`notification ${s===0?"notification--error":s===2?"notification--success":""}`,ref:r,children:[e,a("span",{className:"notification__exit",onClick:c,children:"×"})]})}const p=(e,s)=>{switch(s.type){case"ACCEPTED":return{isShown:!0,message:"Te-ai autentificat !",notificationType:t.SUCCESS};case"INVALID_PASS":return{isShown:!0,message:"Parola este incorectă !",notificationType:t.ERROR};case"NO_USER":return{isShown:!0,message:"Nu există utilizator cu această adresă de mail !",notificationType:t.NO_TYPE};case"SERVER_ERR":return{isShown:!0,message:"Eroare de server, încerca-ți mai târziu !",notificationType:t.ERROR};default:return{isShown:!1,message:"",notificationType:t.NO_TYPE}}};function S(){const[e,s]=o.useReducer(p,{isShown:!1,message:"",notificationType:t.NO_TYPE}),n=o.useRef(null),r=o.useRef(null);function c(l){l.preventDefault(),_.post("http://localhost:5000/login/",{email:n.current.value,password:r.current.value}).then(u=>{const{status:m}=u.data;switch(r.current.value="",m){case"USER_OK":n.current.value="",s({type:"ACCEPTED"});break;case"NO_USER":s({type:"NO_USER"});break;case"PASS_INCORECT":s({type:"INVALID_PASS"});break;default:s({type:"SERVER_ERR"});break}})}return i(d,{children:[e.isShown&&a(h,{message:e.message,type:e.notificationType,deleteNotification:()=>s({type:"DEACTIVATE"})}),a("section",{className:"section-gradient header-section u_padding_down--big",children:a("div",{className:"flex-row--centered",children:a("div",{className:"box-mountain-bg",children:a("div",{className:"box-mountain-bg__form",children:i("form",{onSubmit:c,className:"forn",children:[i("div",{className:"u-margin-bottom-medium u-center-text",children:[a("h2",{className:"heading-secondary",children:"Autentificare"}),i("span",{className:"span-header-block",children:["creeare cont nou  ",a("span",{className:"span-pointer",children:a(f,{to:"/Licenta/signup",icon:"fas fa-id-card"})})]})]}),i("div",{className:"form__group",children:[a("input",{type:"email",className:"form__input",placeholder:"Adresă de email *",id:"email",name:"email",ref:n,required:!0}),a("label",{htmlFor:"email",className:"form__label form__label__required",children:"Adresă de email"})]}),i("div",{className:"form__group u-margin-bottom-intermediate",children:[a("input",{type:"password",className:"form__input",placeholder:"Parolă *",id:"password",name:"password",ref:r,required:!0}),a("label",{htmlFor:"password",className:"form__label form__label__required",children:"Parolă"})]}),a("div",{className:"form__group",children:i("button",{className:"btn btn--white",children:["Intră in cont ",a("i",{className:"fas fa-sign-in-alt"})]})})]})})})})})]})}export{S as default};
