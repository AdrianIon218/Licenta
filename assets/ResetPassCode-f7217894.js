import{r as o,j as u,u as g,a as s}from"./index-9bf9c07c.js";import{a as p}from"./axios-707ed124.js";function x(a){const[n,f]=o.useState({min:0,sec:0}),m=(i,l,r)=>{const t=i*60*60*1e3,d=l*60*1e3,e=r*1e3;return t+d+e};return o.useEffect(()=>{const i=a.time.split(":"),l=m(+i[0],+i[1],+i[2]),r=setInterval(()=>{const t=new Date,d=t.getHours()>12?t.getHours()-12:t.getHours(),e=m(d,t.getMinutes(),t.getSeconds()),c=l-e;c<0?(clearInterval(r),a.codeExpire()):f({min:Math.floor(c/1e3/60),sec:c/1e3%60})},1e3);return()=>{a.codeExpire(),clearInterval(r)}},[a.time]),u("span",{style:{color:"red"},children:[n.min," min ",n.sec," sec"]})}function T(){const a=g(),[n,f]=o.useState(""),[m,i]=o.useState(""),[l,r]=o.useState(!1),t=o.useRef(null);return o.useLayoutEffect(()=>{const e=sessionStorage.getItem("emailToReset");e?f(e):a("/Licenta/password_reset")},[]),o.useEffect(()=>{n&&p.post("http://localhost:5000/login/get_code_expire_time",{email:n}).then(e=>{const{status:c}=e.data;if(c){const{expire_at:h}=e.data;i(h)}})},[n]),s("section",{className:"section-gradient section-header u_padding_down--big",children:s("div",{className:"flex-row--centered",children:s("div",{className:"box-mountain-bg",children:s("div",{className:"box-mountain-bg__form",children:u("form",{onSubmit:e=>{e.preventDefault(),console.log(t.current.value)},className:"forn",children:[s("div",{className:" u-center-text",children:u("h2",{className:"heading-secondary",style:{textTransform:"none"},children:["Introduceți codul trimis la adresa ",n]})}),u("p",{className:"u-margin-bottom-medium",style:{fontSize:"1rem",fontWeight:800},children:["Codul expiră în  ",s(x,{time:m,codeExpire:()=>r(!0)})]}),s("div",{className:"form__group u-margin-bottom-intermediate",children:s("input",{type:"password",className:"form__input u-center-text",placeholder:"Cod de resetare",id:"password",name:"password",minLength:6,maxLength:6,required:!0,ref:t})}),s("div",{className:"form__group",children:s("button",{className:"btn btn--white",children:"Verifică codul"})})]})})})})})}export{T as default};
