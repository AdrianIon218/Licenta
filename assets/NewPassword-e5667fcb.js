import{u as _,r as i,j as t,F as N,a as e,e as w}from"./index-ce33c80b.js";import{a as o,N as S}from"./Notfication-c54b4ab3.js";function y(){const c=_(),[n,r]=i.useState({isShown:!1,messsage:"",type:o.NO_TYPE}),[s,d]=i.useState(!1),a=i.useRef(null),m=sessionStorage.getItem("emailToReset");i.useEffect(()=>{const l=sessionStorage.getItem("allowToResetPass");(!m||l!="true")&&c("/Licenta/login")},[]);function u(){a.current.type==="password"?a.current.type="text":a.current.type="password"}const p=l=>{if(l.preventDefault(),s){c("/Licenta/login");return}const f=a.current.value;w.post("http://localhost:5000/login/changePassword",{email:m,password:f}).then(g=>{const{status:h}=g.data;h?(d(!0),sessionStorage.removeItem("emailToReset"),sessionStorage.removeItem("allowToResetPass"),r({isShown:!0,messsage:"Parolă salvată!",type:o.SUCCESS})):r({isShown:!0,messsage:"Eroare, încercați mai târziu!",type:o.ERROR})}).catch(()=>{r({isShown:!0,messsage:"Eroare, încercați mai târziu!",type:o.ERROR})})};return t(N,{children:[n.isShown&&e(S,{message:n.messsage,type:n.type,deleteNotification:()=>{r({isShown:!1,messsage:"",type:o.NO_TYPE})}}),e("section",{className:"section-gradient section-header u_padding_down--big",children:e("div",{className:"flex-row--centered",children:e("div",{className:"box-mountain-bg",children:e("div",{className:"box-mountain-bg__form",children:t("form",{className:"forn",children:[e("div",{className:"u-center-text u-margin-bottom-medium",children:e("h2",{className:"heading-secondary",style:{textTransform:"none"},children:s?"Parola a fost salvată!":"Setează o parolă nouă!"})}),t("div",{className:"form__group",hidden:s,children:[e("input",{type:"password",minLength:6,maxLength:50,className:"form__input",placeholder:"Parolă de minim 6 caractere *",id:"password",ref:a,required:!0}),e("label",{htmlFor:"password",className:"form__label form__label__required",children:"Parolă"}),t("div",{className:"form__group form__group__checkbox",children:[e("label",{htmlFor:"pass_toggle",className:"form__label",children:"Arată parola"}),e("input",{type:"checkbox",className:"form__checkbox",name:"pass_toggle",id:"pass_toggle",onClick:u})]})]}),e("div",{className:"form__group",children:t("button",{className:"btn btn--white",onClick:p,children:[s?"Înapoi la autenficare":"Salvează parola ",!s&&e("i",{className:"fa fa-save"})]})})]})})})})})]})}export{y as default};
