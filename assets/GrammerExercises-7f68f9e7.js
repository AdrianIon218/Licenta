import{r as u,j as l,F as w,a as t,e as N,R as S}from"./index-5317102d.js";import{N as C,a as v}from"./Notfication-645e106b.js";import{I as x}from"./commonInterfaces-83a6a30d.js";function k(e){const[s,o]=u.useState(!1),[c,m]=u.useState(!1),h=i=>{i.currentTarget.value==="true"===e.structure.state?e.correctAnswear():(o(!0),m(!0))},f=()=>{setTimeout(()=>e.wrongAnswear(),200)};return l(w,{children:[s&&t(C,{message:`Propoziția este ${e.structure.state?"correctă ":"incorectă "}!`,type:v.ERROR,deleteNotification:()=>o(!1)}),l("div",{className:"flex-column--centered exercise",children:[t("h3",{children:"Este corectă propoziția din punct de vedere gramatical ?"}),t("h4",{children:e.structure.sentence}),l("div",{children:[t("button",{value:"flase",disabled:c,onClick:h,className:"false-btn",children:"Falsch"}),t("button",{value:"true",disabled:c,onClick:h,className:"true-btn",children:"Richtig"})]}),c&&t("div",{className:"flex-column--centered",children:e.structure.correct_sentence&&t("h4",{className:"correct_sentence",children:`Varianta corectă : ${e.structure.correct_sentence}`})}),c&&t("button",{className:"submitBtn u-center-text",onClick:f,children:"Continuă"})]})]})}function E(e){const s=u.useRef(null),[o,c]=u.useState({isShown:!1,isCorrect:!1}),m=i=>{s.current.innerText=i.currentTarget.value},h=()=>{if(o.isShown){o.isCorrect?e.correctAnswear():e.wrongAnswear();return}const i=s.current.innerText;i!=""&&(i===e.structure.correctAnswear?c({isShown:!0,isCorrect:!0}):c({isShown:!0,isCorrect:!1}))},f=e.structure.choices.map((i,n)=>t("button",{onClick:m,className:o.isShown?i===e.structure.correctAnswear?"backgd-green":"backgd-red":"",value:i,disabled:o.isShown,children:i},n));return l("div",{className:"flex-column--centered exercise",children:[t("h3",{children:"Completează propoziția"}),l("h4",{children:[e.structure.sentence_part_1," ",t("span",{className:`block-transparent ${o.isShown?o.isCorrect?"backgd-green":"backgd-red":""}`,ref:s})," ",e.structure.sentence_part_2]}),t("div",{className:"box-btns",children:f}),l("button",{className:"submitBtn u-center-text",onClick:h,children:[o.isShown?"Continuă":"Verifică"," ",t("i",{className:"fas fa-angle-double-right"})]})]})}function A(e){const[s,o]=u.useState([]),[c,m]=u.useState({isShown:!1,isCorrect:!1}),h=e.structure.choices.map(r=>r[0]).map((r,a)=>l("li",{children:[t("div",{className:"u-center-text",children:r}),t("div",{className:`u-center-text ${c.isShown?s[a]===e.structure.choices[a][1]?"backgd-green":"backgd-red":""}`,children:s[a]??""})]},a)),f=r=>{const{value:a}=r.currentTarget;o(g=>g.concat([a]))},n=u.useMemo(()=>e.structure.choices.map(r=>r[1]).sort((r,a)=>.5-Math.random()),[]).map((r,a)=>t("button",{onClick:f,value:r,disabled:s.length===h.length||s.includes(r),children:r},a)),d=()=>{if(s.length===e.structure.choices.length){const r=e.structure.choices.every((a,g)=>a[1]===s[g]);m({isShown:!0,isCorrect:r})}},b=r=>{if(r.currentTarget.disabled=!0,c.isCorrect){e.correctAnswear();return}e.wrongAnswear()};return l("div",{className:"flex-column--centered exercise",children:[t("h3",{children:"Completează perechiile"}),t("ul",{className:"choices-match-box",children:h}),t("div",{className:"box-btns choices-box",children:n}),l("button",{className:"submitBtn u-center-text",onClick:()=>{o([])},hidden:c.isShown,children:[t("i",{className:"fa fa-refresh"})," Reset"]}),l("button",{className:"submitBtn u-center-text",onClick:d,hidden:c.isShown,children:["Verifică ",t("i",{className:"fas fa-angle-double-right"})]}),c.isShown&&!c.isCorrect&&t("ul",{className:"choices-box correct-choices",children:e.structure.choices.map((r,a)=>t("li",{children:r.join(" ")},a))}),c.isShown&&l("button",{className:"submitBtn u-center-text",onClick:b,children:["Continuă ",t("i",{className:"fas fa-angle-double-right"})]})]})}function R(e){const[s,o]=u.useState([]),[c,m]=u.useState({isShown:!1,isCorrect:!1}),h=r=>{const{value:a}=r.currentTarget;o(g=>[...g,a])},f=e.structure.words.map((r,a)=>t("span",{className:`block-transparent ${c.isShown?r===s[a]?"backgd-green":"backgd-red":""}`,children:s[a]},a)),n=u.useMemo(()=>[...e.structure.words].sort((r,a)=>.5-Math.random()),[]).map((r,a)=>t("button",{onClick:h,value:r,disabled:s.includes(r),children:r},a)),d=()=>{if(n.length===e.structure.words.length){const r=e.structure.words.every((a,g)=>a===s[g]);m({isShown:!0,isCorrect:r})}},b=r=>{if(r.currentTarget.disabled=!0,c.isCorrect){e.correctAnswear();return}e.wrongAnswear()};return l("div",{className:"flex-column--centered exercise",children:[t("h3",{className:"u-center-text",children:"Ordonează cuvintele astfel încât propoziția să fie corectă !"}),t("p",{className:"flex-row--centered sentence-builder",children:f}),t("div",{className:"box-btns choices-box",children:n}),l("button",{className:"submitBtn u-center-text",onClick:()=>{o([])},hidden:c.isShown,children:[t("i",{className:"fa fa-refresh"})," Reset"]}),l("button",{className:"submitBtn u-center-text",onClick:d,hidden:c.isShown,children:["Verifică ",t("i",{className:"fas fa-angle-double-right"})]}),c.isShown&&!c.isCorrect&&t("div",{className:"choices-box correct-choices flex-column--centered",children:e.structure.words.join(" ")}),c.isShown&&l("button",{className:"submitBtn u-center-text",onClick:b,children:["Continuă ",t("i",{className:"fas fa-angle-double-right"})]})]})}function I(e){const[s,o]=u.useState({score:0,currentExIndex:0,progressBar:50}),[c,m]=u.useState([]);u.useEffect(()=>{e.addProgress(s.progressBar)},[s.progressBar]);const h=i=>{o(n=>({score:n.score+1,currentExIndex:n.currentExIndex+1,progressBar:n.progressBar+i}))},f=i=>{o(n=>({score:n.score-1,currentExIndex:n.currentExIndex+1,progressBar:n.progressBar+i}))};return u.useEffect(()=>{N.post("http://localhost:5000/lessons/grammer/getExercises",{lessonId:e.lessonId}).then(i=>{const n=i.data;n.sort((d,b)=>.5-Math.random()),m(n.map((d,b)=>{const r={structure:d.structure,correctAnswear:()=>h(50/n.length),wrongAnswear:()=>f(50/n.length)};return l(S.Fragment,{children:[d.type==="true_false"&&t(k,{...r}),d.type==="complete_sentence"&&t(E,{...r}),d.type==="match_choices"&&t(A,{...r}),d.type==="order_words"&&t(R,{...r})]},b)}))})},[e.lessonId]),u.useEffect(()=>{const i=c.length;if(s.currentExIndex>0&&s.currentExIndex===i)if(e.currentScore&&e.previousExercisesNum){const n=s.score+e.currentScore,d=i+e.previousExercisesNum,b=n>d/2?x.STAR_3:n>d/3?x.STAR_2:x.STAR_1;e.toFinish(b)}else{const n=s.score>i/2?x.STAR_3:s.score>i/3?x.STAR_2:x.STAR_1;e.toFinish(n)}},[s]),t(S.Fragment,{children:c[s.currentExIndex]})}export{I as default};
