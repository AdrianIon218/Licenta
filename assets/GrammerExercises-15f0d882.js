import{r as u,j as l,F as x,a as e,R as b}from"./index-20e4aa92.js";import{a as w}from"./axios-707ed124.js";import{N as C,a as N}from"./Notfication-e247c5d9.js";function S(t){const[a,i]=u.useState(!1),[n,f]=u.useState(!1),h=r=>{r.currentTarget.value==="true"===t.structure.state?t.correctAnswear():(i(!0),f(!0))},m=()=>{setTimeout(()=>t.wrongAnswear(),200)};return l(x,{children:[a&&e(C,{message:`Propoziția este ${t.structure.state?"correctă ":"incorectă "}!`,type:N.ERROR,deleteNotification:()=>i(!1)}),l("div",{className:"flex-column--centered exercise",children:[e("h3",{children:"Este corectă propoziția din punct de vedere gramatical ?"}),e("h4",{children:t.structure.sentence}),l("div",{children:[e("button",{value:"flase",disabled:n,onClick:h,className:"false-btn",children:"Falsch"}),e("button",{value:"true",disabled:n,onClick:h,className:"true-btn",children:"Richtig"})]}),n&&e("div",{className:"flex-column--centered",children:t.structure.correct_sentence&&e("h4",{className:"correct_sentence",children:`Varianta corectă : ${t.structure.correct_sentence}`})}),n&&e("button",{className:"submitBtn u-center-text",onClick:m,children:"Continuă"})]})]})}function v(t){const a=u.useRef(null),[i,n]=u.useState({isShown:!1,isCorrect:!1}),f=r=>{a.current.innerText=r.currentTarget.value},h=()=>{if(i.isShown){i.isCorrect?t.correctAnswear():t.wrongAnswear();return}const r=a.current.innerText;r!=""&&(r===t.structure.correctAnswear?n({isShown:!0,isCorrect:!0}):n({isShown:!0,isCorrect:!1}))},m=t.structure.choices.map((r,s)=>e("button",{onClick:f,className:i.isShown?r===t.structure.correctAnswear?"backgd-green":"backgd-red":"",value:r,disabled:i.isShown,children:r},s));return l("div",{className:"flex-column--centered exercise",children:[e("h3",{children:"Completează propoziția"}),l("h4",{children:[t.structure.sentence_part_1," ",e("span",{className:`block-transparent ${i.isShown?i.isCorrect?"backgd-green":"backgd-red":""}`,ref:a})," ",t.structure.sentence_part_2]}),e("div",{className:"box-btns",children:m}),l("button",{className:"submitBtn u-center-text",onClick:h,children:[i.isShown?"Continuă":"Verifică"," ",e("i",{className:"fas fa-angle-double-right"})]})]})}function k(t){const[a,i]=u.useState([]),[n,f]=u.useState({isShown:!1,isCorrect:!1}),h=t.structure.choices.map(c=>c[0]).map((c,o)=>l("li",{className:"",children:[e("div",{className:"u-center-text",children:c}),e("div",{className:`u-center-text ${n.isShown?a[o]===t.structure.choices[o][1]?"backgd-green":"backgd-red":""}`,children:a[o]??""})]},o)),m=c=>{const{value:o}=c.currentTarget;i(g=>g.concat([o]))},r=t.structure.choices.map(c=>c[1]).map((c,o)=>e("button",{onClick:m,value:c,disabled:a.length===h.length||a.includes(c),children:c},o));u.useEffect(()=>{r.sort((c,o)=>.5-Math.random())},[]);const s=()=>{if(a.length===t.structure.choices.length){const c=t.structure.choices.every((o,g)=>o[1]===a[g]);f({isShown:!0,isCorrect:c})}},d=()=>{n.isCorrect};return l("div",{className:"flex-column--centered exercise",children:[e("h3",{children:"Completează perechiile"}),e("ul",{className:"choices-match-box",children:h}),e("div",{className:"box-btns choices-box",children:r}),l("button",{className:"submitBtn u-center-text",onClick:()=>{i([])},hidden:n.isShown,children:[e("i",{className:"fa fa-refresh"})," Reset"]}),l("button",{className:"submitBtn u-center-text",onClick:s,hidden:n.isShown,children:["Verifică ",e("i",{className:"fas fa-angle-double-right"})]}),n.isShown&&!n.isCorrect&&e("ul",{className:"choices-box correct-choices",children:t.structure.choices.map((c,o)=>e("li",{children:c.join(" ")},o))}),n.isShown&&l("button",{className:"submitBtn u-center-text",onClick:d,children:["Continuă ",e("i",{className:"fas fa-angle-double-right"})]})]})}function R(t){const[a,i]=u.useState({score:0,currentExIndex:0,progressBar:50}),[n,f]=u.useState([]);u.useEffect(()=>{t.addProgress(a.progressBar)},[a.progressBar]);const h=r=>{i(s=>({score:s.score+1,currentExIndex:s.currentExIndex+1,progressBar:s.progressBar+r}))},m=r=>{i(s=>({score:s.score-1,currentExIndex:s.currentExIndex+1,progressBar:s.progressBar+r}))};return u.useEffect(()=>{w.post("http://localhost:5000/lessons/grammer/getExercises",{lessonId:t.lessonId}).then(r=>{const s=r.data;s.sort((d,c)=>.5-Math.random()),f(s.map((d,c)=>l(b.Fragment,{children:[d.type==="true_false"&&e(S,{structure:d.structure,correctAnswear:()=>h(50/s.length),wrongAnswear:()=>m(50/s.length)}),d.type==="complete_sentence"&&e(v,{structure:d.structure,correctAnswear:()=>h(50/s.length),wrongAnswear:()=>m(50/s.length)}),d.type==="match_choices"&&e(k,{structure:d.structure})]},c)))})},[t.lessonId]),e(b.Fragment,{children:n[a.currentExIndex]})}export{R as default};
