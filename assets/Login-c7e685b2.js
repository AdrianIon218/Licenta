import{r as i,j as s,F as b,a as e,d as c,e as R}from"./index-927f409d.js";import{a as t,N as w}from"./Notfication-431797d0.js";const y=(r,a)=>{switch(a.type){case"ACCEPTED":return{isShown:!1,message:"Te-ai autentificat !",notificationType:t.SUCCESS};case"INVALID_PASS":return{isShown:!0,message:"Parola este incorectă !",notificationType:t.ERROR};case"NO_USER":return{isShown:!0,message:"Nu există utilizator cu această adresă de mail !",notificationType:t.NO_TYPE};case"SERVER_ERR":return{isShown:!0,message:"Eroare de server, încerca-ți mai târziu !",notificationType:t.ERROR};default:return{isShown:!1,message:"",notificationType:t.NO_TYPE}}};function A(){const[r,a]=i.useReducer(y,{isShown:!1,message:"",notificationType:t.NO_TYPE}),[l,u]=i.useState(""),n=i.useRef(null),o=i.useRef(null),[p,f]=i.useState(0);function h(_){_.preventDefault();const d=n.current.value,N=o.current.value;R.post("http://localhost:5000/login/",{email:d,password:N}).then(m=>{const{status:E}=m.data;switch(o.current.value="",E){case"USER_OK":n.current.value="";const{lastLevel:g}=m.data;localStorage.setItem("userAccount",d),a({type:"ACCEPTED"}),u(`/Licenta/course-plan/${g}`);break;case"NO_USER":a({type:"NO_USER"});break;case"PASS_INCORECT":f(S=>S+1),a({type:"INVALID_PASS"});break;default:a({type:"SERVER_ERR"});break}}).catch(()=>{a({type:"SERVER_ERR"})})}return s(b,{children:[l&&e(c,{to:l,transitNow:!0,children:" "}),r.isShown&&e(w,{message:r.message,type:r.notificationType,deleteNotification:()=>a({type:"DEACTIVATE"})}),e("section",{className:"section-gradient section-header u_padding_down--big",children:e("div",{className:"flex-row--centered",children:e("div",{className:"box-mountain-bg",children:e("div",{className:"box-mountain-bg__form",children:s("form",{onSubmit:h,className:"forn",children:[s("div",{className:"u-margin-bottom-medium u-center-text",children:[e("h2",{className:"heading-secondary",children:"Autentificare"}),s("span",{className:"span-header-block",children:["creeare cont nou  ",e("span",{className:"span-pointer",children:e(c,{to:"/Licenta/signup",icon:"fas fa-id-card"})})]}),e("span",{className:"span-header-block span-reset-pass",style:{visibility:p>1?"visible":"hidden"},children:e("span",{className:"span-pointer",children:e(c,{to:"/Licenta/password_reset",className:"span-reset-pass__link",children:"resetare parolă"})})})]}),s("div",{className:"form__group",children:[e("input",{type:"email",className:"form__input",placeholder:"Adresă de email *",id:"email",name:"email",ref:n,required:!0}),e("label",{htmlFor:"email",className:"form__label form__label__required",children:"Adresă de email"})]}),s("div",{className:"form__group u-margin-bottom-intermediate",children:[e("input",{type:"password",className:"form__input",placeholder:"Parolă *",id:"password",name:"password",ref:o,required:!0}),e("label",{htmlFor:"password",className:"form__label form__label__required",children:"Parolă"})]}),e("div",{className:"form__group",children:s("button",{className:"btn btn--white",children:["Intră in cont ",e("i",{className:"fas fa-sign-in-alt"})]})})]})})})})})]})}export{A as default};
