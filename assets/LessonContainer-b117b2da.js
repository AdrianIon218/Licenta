import{j as i,a as e,r as s,V as b,_ as h,F as g,u as m}from"./index-31a3ce1c.js";function v({progressStatus:n}){return i("div",{className:"progress-bar__box",children:[e("div",{className:"progress-bar__loading",style:{width:`${n}%`}}),e("div",{className:"progress-bar__grid-half"})]})}function I(n){const t=s.useContext(b);return e("div",{children:e("button",{onClick:()=>{t.startRecord()},children:"Start recording"})})}const x=s.lazy(()=>h(()=>import("./StartView-d8015983.js"),["assets/StartView-d8015983.js","assets/index-31a3ce1c.js","assets/index-ffaf9618.css"]));function N(n){const[t,o]=s.useState(0),a=l=>{n.triggerTransition(),setTimeout(()=>o(l),450)};return s.useEffect(()=>{sessionStorage.getItem("moduleId")},[]),i(g,{children:[t===0&&e(x,{title:n.lessonTitle,startClickHandler:()=>a(1)}),t===1&&e(I,{toExecises:()=>a(2)})]})}function C(n){const[t,o]=s.useState(!1),a=m(),l=s.useCallback(()=>{sessionStorage.setItem("lessonId",""),sessionStorage.setItem("moduleId",""),sessionStorage.setItem("lessonTitle",""),o(!0),setTimeout(()=>a(-1),410)},[]),c=s.useCallback(()=>{o(!0),setTimeout(()=>n.closeBk(),350)},[]);return e("div",{className:`exit_message__blackdrop ${t&&"exit_message__blackdrop--close"}`,children:i("div",{className:"exit_message__box flex-column--centered",children:[e("div",{className:"btn_exit_ctn",children:e("div",{className:"btn_exit",onClick:c,children:" × "})}),e("h3",{children:" Sigur dorești să închizi lecția ? "}),i("div",{className:"flex-row--centered",children:[e("div",{className:"btn btn--white lesson-btn",onClick:l,children:" Da "}),e("div",{className:"btn btn--blue lesson-btn",onClick:c,children:" Nu "})]})]})})}function S(){const[n,t]=s.useState(!1);return i(g,{children:[n&&e(C,{closeBk:()=>t(!1)}),e("div",{className:"lesson__exit",children:e("button",{className:"lesson__exit__btn",onClick:()=>{t(!0)},children:"×"})})]})}function k(n,t){const o=s.useRef(null);return s.useImperativeHandle(t,()=>({trigger:()=>{o.current.classList.add("lesson-transition--animated")}}),[]),e("div",{className:"lesson-transition",onAnimationEnd:()=>{o.current.classList.remove("lesson-transition--animated")},ref:o})}const p=s.forwardRef(k);function L(){const[n,t]=s.useState({lessonId:-1,moduleId:-1,lessonTitle:""}),[o,a]=s.useState(0),l=m(),c=s.useRef({trigger:()=>{}});s.useEffect(()=>{const r=sessionStorage.getItem("lessonId"),d=sessionStorage.getItem("moduleId"),u=sessionStorage.getItem("lessonTitle");r&&d&&u?t({lessonId:+r,moduleId:+d,lessonTitle:u}):l("/Licenta/PageNotFound")},[]);const _=s.useCallback(r=>{r>=0&&r<=100&&a(r)},[]),f=s.useCallback(()=>{c.current.trigger()},[]);return i("section",{className:"lesson-section",children:[i("div",{className:"lesson-ctn",children:[e(N,{...n,setProgressBar:_,triggerTransition:f}),e(p,{ref:c})]}),e("div",{className:"lesson__progress-bar",children:e(v,{progressStatus:o})}),e(S,{})]})}export{L as default};
