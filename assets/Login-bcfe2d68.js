import{r as n,j as s,a,F as p}from"./index-52de38a1.js";import{L as d}from"./LinkTransition-73cff59e.js";import{a as N}from"./axios-707ed124.js";var i=(e=>(e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.NO_TYPE=3]="NO_TYPE",e))(i||{});function E({message:e,type:t,deleteNotification:c}){const o=n.useRef(null),r=()=>{o.current.classList.add("notification--fade-out"),setTimeout(()=>c(),605)};return n.useEffect(()=>{setTimeout(()=>{o.current!==null&&r()},5e3)},[]),s("div",{className:`notification ${t===0?"notification--error":t===2?"notification--success":""}`,ref:o,children:[e,a("span",{className:"notification__exit",onClick:r,children:"×"})]})}const R=(e,t)=>{switch(t.type){case"ACCEPTED":return{isShown:!1,message:"Te-ai autentificat !",notificationType:i.SUCCESS};case"INVALID_PASS":return{isShown:!0,message:"Parola este incorectă !",notificationType:i.ERROR};case"NO_USER":return{isShown:!0,message:"Nu există utilizator cu această adresă de mail !",notificationType:i.NO_TYPE};case"SERVER_ERR":return{isShown:!0,message:"Eroare de server, încerca-ți mai târziu !",notificationType:i.ERROR};default:return{isShown:!1,message:"",notificationType:i.NO_TYPE}}};function w(){const[e,t]=n.useReducer(R,{isShown:!1,message:"",notificationType:i.NO_TYPE}),[c,o]=n.useState(""),r=n.useRef(null),l=n.useRef(null);function m(f){f.preventDefault(),N.post("http://localhost:5000/login/",{email:r.current.value,password:l.current.value}).then(u=>{const{status:h}=u.data;switch(l.current.value="",h){case"USER_OK":r.current.value="";const{lastLevel:_}=u.data;o(`/Licenta/course-plan/${_}`),t({type:"ACCEPTED"});break;case"NO_USER":t({type:"NO_USER"});break;case"PASS_INCORECT":t({type:"INVALID_PASS"});break;default:t({type:"SERVER_ERR"});break}})}return s(p,{children:[c&&a(d,{to:c,transitNow:!0,children:" "}),e.isShown&&a(E,{message:e.message,type:e.notificationType,deleteNotification:()=>t({type:"DEACTIVATE"})}),a("section",{className:"section-gradient header-section u_padding_down--big",children:a("div",{className:"flex-row--centered",children:a("div",{className:"box-mountain-bg",children:a("div",{className:"box-mountain-bg__form",children:s("form",{onSubmit:m,className:"forn",children:[s("div",{className:"u-margin-bottom-medium u-center-text",children:[a("h2",{className:"heading-secondary",children:"Autentificare"}),s("span",{className:"span-header-block",children:["creeare cont nou  ",a("span",{className:"span-pointer",children:a(d,{to:"/Licenta/signup",icon:"fas fa-id-card"})})]})]}),s("div",{className:"form__group",children:[a("input",{type:"email",className:"form__input",placeholder:"Adresă de email *",id:"email",name:"email",ref:r,required:!0}),a("label",{htmlFor:"email",className:"form__label form__label__required",children:"Adresă de email"})]}),s("div",{className:"form__group u-margin-bottom-intermediate",children:[a("input",{type:"password",className:"form__input",placeholder:"Parolă *",id:"password",name:"password",ref:l,required:!0}),a("label",{htmlFor:"password",className:"form__label form__label__required",children:"Parolă"})]}),a("div",{className:"form__group",children:s("button",{className:"btn btn--white",children:["Intră in cont ",a("i",{className:"fas fa-sign-in-alt"})]})})]})})})})})]})}export{w as default};
