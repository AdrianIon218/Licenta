import{r as i,j as t,a,F as N}from"./index-c08d5e35.js";import{L as m}from"./LinkTransition-1ea846b7.js";import{a as R}from"./axios-707ed124.js";var r=(e=>(e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING",e[e.SUCCESS=2]="SUCCESS",e[e.NO_TYPE=3]="NO_TYPE",e))(r||{});function S({message:e,type:s,deleteNotification:c}){const o=i.useRef(null),n=()=>{o.current.classList.add("notification--fade-out"),setTimeout(()=>c(),605)};return i.useEffect(()=>{setTimeout(()=>{o.current!==null&&n()},5e3)},[]),t("div",{className:`notification ${s===0?"notification--error":s===2?"notification--success":""}`,ref:o,children:[e,a("span",{className:"notification__exit",onClick:n,children:"×"})]})}const g=(e,s)=>{switch(s.type){case"ACCEPTED":return{isShown:!1,message:"Te-ai autentificat !",notificationType:r.SUCCESS};case"INVALID_PASS":return{isShown:!0,message:"Parola este incorectă !",notificationType:r.ERROR};case"NO_USER":return{isShown:!0,message:"Nu există utilizator cu această adresă de mail !",notificationType:r.NO_TYPE};case"SERVER_ERR":return{isShown:!0,message:"Eroare de server, încerca-ți mai târziu !",notificationType:r.ERROR};default:return{isShown:!1,message:"",notificationType:r.NO_TYPE}}};function A(){const[e,s]=i.useReducer(g,{isShown:!1,message:"",notificationType:r.NO_TYPE}),[c,o]=i.useState(""),n=i.useRef(null),l=i.useRef(null);function f(h){h.preventDefault();const u=n.current.value,p=l.current.value;R.post("http://localhost:5000/login/",{email:u,password:p}).then(d=>{const{status:_}=d.data;switch(l.current.value="",_){case"USER_OK":n.current.value="";const{lastLevel:E}=d.data;sessionStorage.setItem("userAccount",u),s({type:"ACCEPTED"}),o(`/Licenta/course-plan/${E}`);break;case"NO_USER":s({type:"NO_USER"});break;case"PASS_INCORECT":s({type:"INVALID_PASS"});break;default:s({type:"SERVER_ERR"});break}})}return t(N,{children:[c&&a(m,{to:c,transitNow:!0,children:" "}),e.isShown&&a(S,{message:e.message,type:e.notificationType,deleteNotification:()=>s({type:"DEACTIVATE"})}),a("section",{className:"section-gradient header-section u_padding_down--big",children:a("div",{className:"flex-row--centered",children:a("div",{className:"box-mountain-bg",children:a("div",{className:"box-mountain-bg__form",children:t("form",{onSubmit:f,className:"forn",children:[t("div",{className:"u-margin-bottom-medium u-center-text",children:[a("h2",{className:"heading-secondary",children:"Autentificare"}),t("span",{className:"span-header-block",children:["creeare cont nou  ",a("span",{className:"span-pointer",children:a(m,{to:"/Licenta/signup",icon:"fas fa-id-card"})})]})]}),t("div",{className:"form__group",children:[a("input",{type:"email",className:"form__input",placeholder:"Adresă de email *",id:"email",name:"email",ref:n,required:!0}),a("label",{htmlFor:"email",className:"form__label form__label__required",children:"Adresă de email"})]}),t("div",{className:"form__group u-margin-bottom-intermediate",children:[a("input",{type:"password",className:"form__input",placeholder:"Parolă *",id:"password",name:"password",ref:l,required:!0}),a("label",{htmlFor:"password",className:"form__label form__label__required",children:"Parolă"})]}),a("div",{className:"form__group",children:t("button",{className:"btn btn--white",children:["Intră in cont ",a("i",{className:"fas fa-sign-in-alt"})]})})]})})})})})]})}export{A as default};
